<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/diamond-layout/template_accdoc.xhtml">

    <ui:define name="title">
        #{accountVoucherEditController.tabTitle}
    </ui:define>

    <ui:param name="viewname" value="#{accountVoucherEditController.tabTitle}" />

    <ui:define name="toolbar">
        <!--<li>
            <p:commandButton title="Product Search" oncomplete="PF('ProductSearchDialog').show()" update=":ProductSearchDlg, :growl"
                             process="@this" icon="fa fa-search" styleClass="purple-btn" style="margin: 2px;"/>
        </li>-->
        <li>
            <p:commandButton id="btnsave" title="Save" update=":mainform, :growl" 
                             ajax="true" icon="fa fa-save" onclick="PF('btnsave').disable();"
                             oncomplete="PF('btnsave').enable();"
                             actionListener="#{accountVoucherEditController.save()}"/>
        </li>

        <li>
            <p:splitButton id="btnprint" title="Print" icon="fa fa-print" model="#{accountVoucherEditController.printButtonModel}"
                           disabled="#{accountVoucherEditController.printDisabled}" ajax="false"/>
        </li>

        <li>
            <p:commandButton id="btncopyfrom" title="Copy From" icon="far fa-object-group" 
                             oncomplete="PF('CopyDialog').show()" update=":copyform"/>
        </li>

        <li>
            <p:commandButton id="btncopy" title="Make Copy" icon="far fa-copy" actionListener="#{accountVoucherEditController.makeCopy()}"
                             disabled="#{accountVoucherEditController.selected.docno eq null}" ajax="false"/>
        </li>
    </ui:define>

    <ui:define name="content">
        <p:outputPanel deferred="true">
            <div class="p-grid">
                <div class="p-col-12 p-md-12">
                    <p:tabView id="tabsview" styleClass="card ui-fluid">
                        <p:ajax event="tabChange" update="transtable"/>
                        <p:tab title="Details">
                            <div class="ui-fluid p-formgrid p-grid">
                                <div class="p-field p-col-12 p-md-3">
                                    <p:outputLabel value="Doc No" for="dno" style="font-size: smaller"/>
                                    <p:inputText id="dno" value="#{accountVoucherEditController.selected.docno}" placeholder="Document No" disabled="true"/>
                                </div>
                                <div class="p-field p-col-12 p-md-3">
                                    <p:outputLabel value="Date" for="ddate" style="font-size: smaller"/>
                                    <p:datePicker id="ddate" value="#{accountVoucherEditController.selected.docdate}" 
                                                  readonlyInput="true" yearNavigator="true" monthNavigator="true"
                                                  showIcon="true" showButtonBar="true" required="true" requiredMessage="Please select Date" pattern="dd/MM/yyyy"/>
                                </div>
                                <div class="p-field p-col-12 p-md-3">
                                    <p:outputLabel value="Created By" for="createdby" style="font-size: smaller"/>
                                    <p:inputText id="createdby" value="#{accountVoucherEditController.selected.emp}" placeholder="Created By" disabled="true"/>
                                </div>

                                <div class="p-field p-col-12 p-md-3">
                                    <p:outputLabel value="Branch:" for="branch"/>
                                    <p:inputText id="branch" value="#{userSession.loggedInBranch.branchname}" disabled="true"/>
                                </div>

                                <div class="p-field p-col-12 p-md-3">
                                    <p:outputLabel value="Cheque No" for="chqno" style="font-size: smaller"/>
                                    <p:inputText id="chqno" value="#{accountVoucherEditController.selected.paymentMethod.refno}" placeholder="Cheque No"/>
                                </div>

                                <div class="p-field p-col-12 p-md-3">
                                    <p:outputLabel value="Bank" for="bank" style="font-size: smaller"/>
                                    <p:inputText id="bank" value="#{accountVoucherEditController.selected.paymentMethod.refdetails}" placeholder="Bank"/>
                                </div>

                                <div class="p-field p-col-12 p-md-3">
                                    <p:outputLabel value="Cheque Date" for="chqdate" style="font-size: smaller"/>
                                    <p:datePicker id="chqdate" value="#{accountVoucherEditController.selected.paymentMethod.paydate}" 
                                                  readonlyInput="true" yearNavigator="true" monthNavigator="true"
                                                  showIcon="true" showButtonBar="true" required="true" requiredMessage="Please select Date" pattern="dd/MM/yyyy"/>
                                </div>

                                <div class="#{accountVoucherEditController.selected.busdocinfo.accountModeVisible ? 'p-field  p-col-12 p-md-3' : ''}">
                                    <p:outputLabel value="#{accountVoucherEditController.selected.busdocinfo.accountModeTitle}" 
                                                   for="defmode" style="font-size: smaller" 
                                                   rendered="#{accountVoucherEditController.selected.busdocinfo.accountModeVisible}"/>
                                    <p:selectOneMenu id="defmode" value="#{accountVoucherEditController.defaultModeAccount}" converter="#{entityConverter}" 
                                                     effect="fade" rendered="#{accountVoucherEditController.selected.busdocinfo.accountModeVisible}">
                                        <f:selectItems value="#{accountVoucherEditController.selected.busdocinfo.defaultaccid}" var="item" 
                                                       itemLabel="#{item.accountid.accountname}" itemValue="#{item.accountid}"/>
                                    </p:selectOneMenu>  
                                </div>

                                <div class="p-field  p-col-12 p-md-3">
                                    <p:outputLabel value="Pact No" for="pactno" style="font-size: smaller"/>
                                    <p:inputText id="pactno" value="#{accountVoucherEditController.selected.extra1}" placeholder="Pact No"/>
                                </div>

                                <div class="p-field  p-col-12 p-md-12">
                                    <p:outputLabel value="Description" for="description" style="font-size: smaller"/>
                                    <p:inputText id="description" value="#{accountVoucherEditController.selected.description}" placeholder="Description"/>
                                </div>
                            </div>
                            <br/>
                            <p:panel header="Transactions">
                                <p:remoteCommand name="onCellEditMain" update=""/>
                                <f:facet name="actions">
                                    <p:commandButton id="deleteButton" icon="fa fa-trash"
                                                     update=":growl,:mainform:tabsview:transtable" disabled="#{empty accountVoucherEditController.selectedLedgerLine}" 
                                                     title="Delete selected Transaction" styleClass="#{systemDefaultsController.systemButtonStyle}" 
                                                     actionListener="#{accountVoucherEditController.deleteTransactions()}">
                                        <p:confirm header="Confirmation" message="Sure you want to delete?" icon="fa fa-alert"/>
                                    </p:commandButton>
                                </f:facet>
                                <p:dataTable id="transtable" var="led"
                                             value="#{accountVoucherEditController.selected.ledlines}" widgetVar="ledtable"
                                             rowKey="#{led.llno}"
                                             selectionMode="single"
                                             selection="#{accountVoucherEditController.selectedLedgerLine}"
                                             rowIndexVar="index"
                                             editable="true"
                                             editMode="cell"
                                             emptyMessage="No Transactions found"
                                             styleClass="products-table ui-datatable-gridlines ui-datatable-sm"
                                             size="small"
                                             sortBy="#{led.accdoc.docno}">

                                    <p:ajax event="rowSelect" update=":mainform:tabsview:deleteButton"/>
                                    <p:ajax event="rowUnselect" update=":mainform:tabsview:deleteButton"/>
                                    <p:ajax event="cellEdit"/>

                                    <p:column headerText="Sr" style="width: 25px">
                                        <h:outputText value="#{index+1}"/>
                                    </p:column>

                                    <p:column headerText="Account" style="width: 30%">
                                        <h:outputText value="#{led.account.accountname}" />
                                    </p:column>

                                    <p:column headerText="Remarks" style="width: 30%">
                                        <p:cellEditor>
                                            <f:facet name="output"><h:outputText value="#{led.description}" /></f:facet>
                                            <f:facet name="input">
                                                <p:inputText value="#{led.description}"
                                                             style="border-left: 5px solid goldenrod; width: 100%;" label="Remarks"/>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>

                                    <p:column headerText="Cur" style="text-align: left;">
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText value="#{led.currency.currencysym}"/>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:selectOneMenu id="currency" style="width:100%" value="#{led.currency}" converter="#{entityConverter}" 
                                                                 var="t" effect="fade">
                                                    <f:selectItems value="#{accountVoucherEditController.currencyList}" var="item" itemLabel="#{item.currencysym}" itemValue="#{item}"/>
                                                    <p:ajax event="change" listener="#{accountVoucherEditController.updateCurrency(led)}" 
                                                            update="rate, debit, credit"/>
                                                    <p:column>
                                                        <f:facet name="header">
                                                            <h:outputText value="Cur"/>
                                                        </f:facet>
                                                        <h:outputText value="#{t.currencysym}"/>
                                                    </p:column>
                                                </p:selectOneMenu>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>

                                    <p:column headerText="Rate" style="text-align: right; width: 75">
                                        <p:cellEditor id="rate">
                                            <f:facet name="output">
                                                <h:outputText value="#{led.rate}" style="float: right;">
                                                    <f:convertNumber pattern="#,##0.00000" />
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputText value="#{led.rate}" style="text-align:right; border-left: 5px solid goldenrod; width: 100%;" 
                                                             label="Debit">
                                                    <f:convertNumber pattern="#,##0.00000" />
                                                    <p:ajax update="rate, debit, credit" oncomplete="onCellEditMain()"/>
                                                </p:inputText>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>

                                    <p:column headerText="Debit" style="text-align: right" 
                                              rendered="#{accountVoucherEditController.selected.busdocinfo.ledgerLineCreditVisible}">
                                        <p:cellEditor id="debit">
                                            <f:facet name="output">
                                                <h:outputText value="#{led.fcdebit}" style="float: right;">
                                                    <f:convertNumber pattern="#,##0.000" />
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputText value="#{led.fcdebit}" style="text-align:right; border-left: 5px solid goldenrod; width: 100%;" 
                                                             label="Debit">
                                                    <f:convertNumber pattern="#,##0.000" />
                                                    <p:ajax update="rate, debit, credit" oncomplete="onCellEditMain()"/>
                                                </p:inputText>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>

                                    <p:column headerText="Credit" style="text-align: right"
                                              rendered="#{accountVoucherEditController.selected.busdocinfo.ledgerLineDebitVisible}">
                                        <p:cellEditor id="credit">
                                            <f:facet name="output">
                                                <h:outputText value="#{led.fccredit}" style="float: right;">
                                                    <f:convertNumber pattern="#,##0.000" />
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputText value="#{led.fccredit}" style="text-align:right; border-left: 5px solid goldenrod; width: 100%;" label="Credit">
                                                    <f:convertNumber pattern="#,##0.000" />
                                                    <p:ajax update="rate, debit, credit"/>
                                                </p:inputText>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>

                                    <p:columnGroup id="tablesummary" type="footer">
                                        <p:row>
                                            <p:column style="text-align:right;" styleClass="ui-panel-titlebar"></p:column>
                                            <p:column style="text-align:right;" styleClass="ui-panel-titlebar"></p:column>
                                            <p:column style="text-align:right;" styleClass="ui-panel-titlebar"></p:column>
                                            <p:column style="text-align:right;" styleClass="ui-panel-titlebar"></p:column>
                                            <p:column style="text-align:right;" styleClass="ui-panel-titlebar">
                                                Total
                                            </p:column>
                                            <p:column style="text-align:right;" styleClass="ui-panel-titlebar"
                                                      rendered="#{accountVoucherEditController.selected.busdocinfo.ledgerLineCreditVisible}"
                                                      footerText="#{systemDefaultsController.formatDecimal(accountVoucherEditController.selected.totalDebit)}"/>
                                            <p:column style="text-align:right;" styleClass="ui-panel-titlebar"
                                                      rendered="#{accountVoucherEditController.selected.busdocinfo.ledgerLineDebitVisible}"
                                                      footerText="#{systemDefaultsController.formatDecimal(accountVoucherEditController.selected.totalCredit)}"/>
                                        </p:row>
                                    </p:columnGroup>                                    
                                </p:dataTable>
                            </p:panel>
                        </p:tab>                   

                        <p:tab title="Invoices">
                            <p:tabView id="inv_tabsview" dynamic="true" cache="true" styleClass="card ui-fluid" widgetVar="invtabsview">
                                <!--Dynamic tabs for Customer and Supplier starts here -->
                                <c:forEach items="#{accountVoucherEditController.tabs}" var="tab" varStatus="loop">
                                    <p:tab title="#{tab.title}">
                                        <p:splitter styleClass="p-mb-5" widgetVar="layoutVar">
                                            <p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center">
                                                <p:panel id="pendingpanel" header="Pending Invoices">
                                                    <f:facet name="actions">
                                                        <p:commandButton id="ptransferButton_#{loop.index}" icon="fa fa-arrow-right"
                                                                         update=":growl, @widgetVar(paidtable_#{loop.index})" disabled="#{empty tab.selectedPendingDocs}" 
                                                                         title="Transfer selected Transaction" styleClass="#{systemDefaultsController.systemButtonStyle}" 
                                                                         actionListener="#{tab.transferSelectedPendingInvoice()}"/>
                                                    </f:facet>
                                                    <p:contextMenu id="pendingcm_#{loop.index}" for="pendingtable_#{loop.index}">
                                                        <p:menuitem value="Transfer" update=":growl, @widgetVar(paidtable_#{loop.index})" icon="fa fa-arrow-right" 
                                                                    disabled="#{empty tab.selectedPendingDocs}"
                                                                    actionListener="#{tab.transferSelectedPendingInvoice()}"/>
                                                    </p:contextMenu>
                                                    <p:dataTable id="pendingtable_#{loop.index}" var="item"
                                                                 value="#{tab.pendingDocs}" widgetVar="pendtable_#{loop.index}"
                                                                 rowKey="#{item.docno}"
                                                                 selection="#{tab.selectedPendingDocs}"
                                                                 emptyMessage="No Documents found"
                                                                 styleClass="products-table ui-datatable-striped ui-datatable-gridlines ui-datatable-sm"
                                                                 style="font-size: small"
                                                                 sortBy="#{item.businesspartner.partnerid}">

                                                        <p:ajax event="rowSelect" update="@parent:ptransferButton_#{loop.index}, @parent:pendingcm_#{loop.index}"/>
                                                        <p:ajax event="rowUnselect" update="@parent:ptransferButton_#{loop.index}, @parent:pendingcm_#{loop.index}"/>
                                                        <p:ajax event="cellEdit"/>

                                                        <p:column selectionMode="multiple" style="width: 16px; text-align: center"/>

                                                        <p:column sortBy="#{item.docdate}" filterBy="#{item.docdate}" filterMatchMode="contains">
                                                            <f:facet name="header">
                                                                <h:outputText value="Date"/>
                                                            </f:facet>
                                                            <h:outputText value="#{item.docdate}">
                                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                                            </h:outputText>
                                                        </p:column>

                                                        <p:column headerText="Doc No" sortBy="#{item.docno}" filterBy="#{item.docno}" filterMatchMode="contains">
                                                            <h:outputText value="#{item.docno}" />
                                                        </p:column>

                                                        <p:column sortBy="#{item.grandtotal}" style="text-align: right">
                                                            <f:facet name="header">
                                                                <h:outputText value="Invoiced"/>
                                                            </f:facet>
                                                            <h:outputText value="#{item.grandtotal}">
                                                                <f:convertNumber pattern="#,##0.000" />
                                                            </h:outputText>
                                                        </p:column>

                                                        <p:column sortBy="#{item.totalPaid}" style="text-align: right">
                                                            <f:facet name="header">
                                                                <h:outputText value="Paid"/>
                                                            </f:facet>
                                                            <h:outputText value="#{item.totalPaid}">
                                                                <f:convertNumber pattern="#,##0.000" />
                                                            </h:outputText>
                                                        </p:column>

                                                        <p:column sortBy="#{item.totalPending}" style="text-align: right">
                                                            <f:facet name="header">
                                                                <h:outputText value="Pending"/>
                                                            </f:facet>
                                                            <h:outputText value="#{item.totalPending}">
                                                                <f:convertNumber pattern="#,##0.000" />
                                                            </h:outputText>
                                                        </p:column>

                                                        <p:columnGroup id="inv_tablesummary" type="footer">
                                                            <p:row>
                                                                <p:column style="text-align:right;" styleClass="ui-panel-titlebar"></p:column>
                                                                <p:column style="text-align:right;" styleClass="ui-panel-titlebar"></p:column>
                                                                <p:column style="text-align:right;" styleClass="ui-panel-titlebar">
                                                                    Total
                                                                </p:column>
                                                                <p:column style="text-align:right" styleClass="ui-panel-titlebar"
                                                                          footerText="#{systemDefaultsController.formatDecimal(tab.totalInvoiced_Pending)}"/>
                                                                <p:column style="text-align:right" styleClass="ui-panel-titlebar"
                                                                          footerText="#{systemDefaultsController.formatDecimal(tab.totalPaid_Pending)}"/>
                                                                <p:column style="text-align:right" styleClass="ui-panel-titlebar"
                                                                          footerText="#{systemDefaultsController.formatDecimal(tab.totalPending_Pending)}"/>
                                                            </p:row>
                                                        </p:columnGroup>                                    
                                                    </p:dataTable>
                                                </p:panel>
                                            </p:splitterPanel>
                                            <p:splitterPanel styleClass="p-d-flex p-ai-center p-jc-center">
                                                <p:panel id="paidpanel" header="Paid Invoices">
                                                    <p:remoteCommand name="onCellEdit" actionListener="#{tab.updateLedgerValue()}" update="paidtable_#{loop.index}" />
                                                    <f:facet name="actions">
                                                        <p:commandButton id="pdeleteButton_#{loop.index}" icon="fa fa-trash"
                                                                         update=":growl, paidtable_#{loop.index}" disabled="#{empty tab.paymentList}" 
                                                                         title="Delete selected Transaction" styleClass="#{systemDefaultsController.systemButtonStyle}" 
                                                                         actionListener="#{tab.deleteSelectedInvoice()}">
                                                            <p:confirm header="Confirmation" message="Sure you want to delete?" icon="fa fa-alert"/>
                                                        </p:commandButton>
                                                    </f:facet>
                                                    <p:dataTable id="paidtable_#{loop.index}" var="item"
                                                                 value="#{tab.paymentList}" widgetVar="paidtable_#{loop.index}"
                                                                 rowKey="#{item.pplineno}"
                                                                 selection="#{tab.selectedPaymentDetails}"
                                                                 selectionMode="single"
                                                                 editable="true"
                                                                 editMode="cell"
                                                                 emptyMessage="No Documents found"
                                                                 styleClass="products-table ui-datatable-striped ui-datatable-gridlines ui-datatable-sm"
                                                                 style="font-size: small"
                                                                 sortBy="#{item.position}">

                                                        <p:ajax event="rowSelect" update="@parent:pdeleteButton_#{loop.index}"/>
                                                        <p:ajax event="rowUnselect" update="@parent:pdeleteButton_#{loop.index}"/>
                                                        <p:ajax event="cellEdit" />

                                                        <p:column headerText="Trans No">
                                                            <h:outputText value="#{item.pplineno}" />
                                                        </p:column>

                                                        <p:column>
                                                            <f:facet name="header">
                                                                <h:outputText value="Date"/>
                                                            </f:facet>
                                                            <h:outputText value="#{item.busdoc.docdate}">
                                                                <f:convertDateTime pattern="dd/MM/yyyy" />
                                                            </h:outputText>
                                                        </p:column>

                                                        <p:column headerText="Doc No" sortBy="#{item.busdoc.docno}" filterBy="#{item.busdoc.docno}" filterMatchMode="contains">
                                                            <h:outputText value="#{item.busdoc.docno}" />
                                                        </p:column>

                                                        <p:column style="text-align: right">
                                                            <f:facet name="header">
                                                                <h:outputText value="Pending"/>
                                                            </f:facet>
                                                            <h:outputText value="#{item.pendingAmount}">
                                                                <f:convertNumber pattern="#,##0.000" />
                                                            </h:outputText>
                                                        </p:column>

                                                        <p:column headerText="Amount" style="text-align:right">
                                                            <f:facet name="header">
                                                                <h:outputText value="Amount"/>
                                                            </f:facet>
                                                            <p:cellEditor>
                                                                <f:facet name="output">
                                                                    <h:outputText value="#{item.amount}" style="float: right;">
                                                                        <f:convertNumber pattern="#,##0.000" />
                                                                    </h:outputText>
                                                                </f:facet>
                                                                <f:facet name="input">
                                                                    <p:inputText id="price" value="#{item.amount}" 
                                                                                 style="text-align:right; border-left: 5px solid goldenrod; width: 100%;" label="Amount">
                                                                        <f:convertNumber pattern="#,##0.000" />
                                                                        <p:ajax oncomplete="onCellEdit()"/>
                                                                    </p:inputText>
                                                                </f:facet>
                                                            </p:cellEditor>
                                                        </p:column>

                                                        <p:column id="balance" style="text-align: right">
                                                            <f:facet name="header">
                                                                <h:outputText value="Balance"/>
                                                            </f:facet>
                                                            <h:outputText value="#{item.balanceAmount}">
                                                                <f:convertNumber pattern="#,##0.000" />
                                                            </h:outputText>
                                                        </p:column>

                                                        <p:columnGroup id="paid_tablesummary" type="footer">
                                                            <p:row>
                                                                <p:column style="text-align:right;" styleClass="ui-panel-titlebar"></p:column>
                                                                <p:column style="text-align:right;" styleClass="ui-panel-titlebar"></p:column>
                                                                <p:column style="text-align:right;" styleClass="ui-panel-titlebar">
                                                                    Total
                                                                </p:column>
                                                                <p:column style="text-align:right" styleClass="ui-panel-titlebar"
                                                                          footerText="#{systemDefaultsController.formatDecimal(tab.totalPending_Paid)}"/>
                                                                <p:column style="text-align:right" styleClass="ui-panel-titlebar"
                                                                          footerText="#{systemDefaultsController.formatDecimal(tab.totalAmount_Paid)}"/>
                                                                <p:column style="text-align:right" styleClass="ui-panel-titlebar"
                                                                          footerText="#{systemDefaultsController.formatDecimal(tab.balanceAmount_Paid)}"/>
                                                            </p:row>
                                                        </p:columnGroup>                                    
                                                    </p:dataTable>
                                                </p:panel>
                                            </p:splitterPanel>
                                        </p:splitter>
                                    </p:tab>
                                </c:forEach>
                            </p:tabView>
                        </p:tab>
                    </p:tabView>
                </div>
            </div>
        </p:outputPanel>
    </ui:define>
    <ui:define name="other_includes">
        <ui:include src="/accounts/copyfrom.xhtml"/>
    </ui:define>

    <ui:define name="productsearch">
        <h:form id="psform">
            <pe:slideout id="slideoutProduct" title="Accounts" icon="fa fa-search" location="top" widgetVar="slideout" 
                         handleStyleClass="product-handle" panelStyleClass="product-panel" offset="230px" bounceTimes="5"
                         bounceDistance="100px" handleOffsetReverse="false" >
                <p:panel>
                    <p:panelGrid columns="4" columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4" layout="grid"  >
                        <p:outputLabel for="pcriteria" value="Search Criteria" />
                        <p:inputText id="pcriteria" placeholder="Criteria" value="#{accountVoucherEditController.criteria}" />
                        <p:commandButton value="Search" actionListener="#{accountVoucherEditController.searchAccounts()}" update="prodtable"/>
                        <p:commandButton value="Transfer" actionListener="#{accountVoucherEditController.transfer()}" update=":mainform:tabsview:transtable, @widgetVar(invtabsview)"/>
                    </p:panelGrid>
                    <p:panel styleClass="slide-product-panel">
                        <p:dataTable id="prodtable" var="acc"
                                     value="#{accountVoucherEditController.accountList}" widgetVar="ptable"
                                     selection="#{accountVoucherEditController.selectedAccountList}"
                                     rowKey="#{acc.accountid}"
                                     emptyMessage="No Accounts found"
                                     styleClass="products-table ui-datatable-striped ui-datatable-gridlines ui-datatable-sm"
                                     style="font-size: small">
                            <p:column selectionMode="multiple" style="width: 16px; text-align: center"/>
                            <p:column headerText="Account#" sortBy="#{acc.accountid}" filterMatchMode="contains"
                                      style="width: 70px">
                                <h:outputText value="#{acc.accountid}" />
                            </p:column>

                            <p:column headerText="Account Name" sortBy="#{acc.accountname}" filterBy="#{acc.accountname}" filterMatchMode="contains"
                                      style="width: 35%">
                                <h:outputText value="#{acc.accountname}" />
                            </p:column>

                            <p:column headerText="Parent" sortBy="#{acc.parentid.accountname}" filterBy="#{acc.parentid.accountname}" filterMatchMode="contains"
                                      style="width: 35%">
                                <h:outputText value="#{acc.parentid.accountname}" />
                            </p:column>

                            <p:column headerText="Type" sortBy="#{acc.accounttype.name}" filterBy="#{acc.accounttype.name}" filterMatchMode="contains">
                                <h:outputText value="#{acc.accounttype.name}" />
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                </p:panel>
            </pe:slideout>
        </h:form>
    </ui:define>
</ui:composition>